---
# 포스트 제목을 기재합니다.
title:  "ECS 란" 
# 저자를 입력합니다. 
author: "tonystark"
# 카테고리를 입력합니다.
categories: ["AWS"]
last_modified_at: 2020-01-09T08:15:00-18:00
---

# AWS 엘라스틱 컨테이너 서비스 기초

[아마존 엘라스틱 컨테이너 서비스(ECS)와 도커(Docker)로 시작하는 컨테이너 오케스트레이션](https://www.44bits.io/ko/post/container-orchestration-101-with-docker-and-aws-elastic-container-service)

## 클러스터와 컨테이너 인스턴스

![https://static.hubtee.com/files/946/9468152073bec2df07ecfd01a1c05e025965ac18b76d523908415d9644dd3e5e.m.png](https://static.hubtee.com/files/946/9468152073bec2df07ecfd01a1c05e025965ac18b76d523908415d9644dd3e5e.m.png)

ECS의 가장 기본적인 단위는 클러스터. 클러스터 ? 도커 컨테이너를 실행할 수 있는 가상의 공간

ECS 클러스터는 기복적으로 EC2와 같은 컴퓨팅 자원을 기본적으로 포함하고 있지 않은 논리적인 단위

따라서, 컴퓨팅 자원(EC2)가 없는 빈 클러스터를 만들 수도 있음.

EC2에 ecs-client라는 서비스로 특정 클러스터와 연결가능 ⇒ 이런 클러스터에 연결된 EC2 인스턴스를 

**컨테이너 인스턴스** 라고 함

## 태스크 디피니션과 태스크

![https://static.hubtee.com/files/325/32589e80f9b5f7c184b91fd16bc0dccd1f476e0cf8643eb8be009b4db1ba027a.m.png](https://static.hubtee.com/files/325/32589e80f9b5f7c184b91fd16bc0dccd1f476e0cf8643eb8be009b4db1ba027a.m.png)

태스크? ECS에서 컨테이너를 실행하는 최소 단위 ⇒ 태스크는 하나 이상의 컨테이너로 구성 

태스크 디피니션? 태스크를 실행하기 위한 설정들을 미리 하나의 단위로 정의 해놓고 사용하는 것

태스크는 클러스터에 종속적 / 태스크 디피니션은 클러스터에 종속적이지 않음

## 서비스

클러스터에서 태스크를 실행할 수 있는 방법 두가지.

1. 태스크 디피니션으로 직접 태스크 실행 ⇒ 실행 이후 관리 X
2. 서비스 정의 ⇒ 하나의 태스크 디피니션과 연결, 데몬 타입 : 모든 컨테이너 인스턴스에 해당하는  태스크가 하나씩 실행됨 / 리플리카 타입 : 실행하려는 태스크의 개수를 지정하여 서비스가 클러스터에서 이 태스크 개수만큼 실행되도록 자동적으로 관리해줌 (실제 서비스에서 주로 사용)

![https://static.hubtee.com/files/c99/c9960bb6f78bbf08198503320e98e2aa93625f0ac1f4e11c382b384a5dfadb1a.m.png](https://static.hubtee.com/files/c99/c9960bb6f78bbf08198503320e98e2aa93625f0ac1f4e11c382b384a5dfadb1a.m.png)

서비스는 클러스터 내에서 태스크를 스케쥴링 하는 역활을 담당

### 엘라스틱 컨테이너 레지스트리 (ECR)

프라이빗 도커 레지스트리, IAM과 결합가능

### 주요 개념

**Docker :** 컨테이너 가상화 도구.

**Dockerfile :** 도커의 이미지 생성 과정을 정의한 DSL 형식으로 작성된 파일.

**클러스터 :** ECS의 가장 기본적인 단위. 서비스나 태스크가 실행되는 공간을 나누는 논리적인 공간.

**컨테이너 인스턴스 :** 클러스터에서 속한 인스턴스. 클러스터에 서비스나 태스크 실행을 요청하면 클러스터에 속한 컨테이너 인스턴스 중 하나에서 실행된다.

**서비스 :** 태스크를 관리하는 단위. 내부적으로 태스크 실행을 위한 스케줄러를 가지고 있으면 서비스의 정의한 대로 태스크(들)이 실행되는 상태를 유지시키려고 한다.

**엘라스틱 컨테이너 서비스 :** AWS에서 제공하는 프라이빗 도커 레지스트리(이미지 저장소).
